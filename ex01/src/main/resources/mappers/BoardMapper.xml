<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.board.mapper.BoardMapper">

<sql id="criteria">
  <where>
      <if test="first_name != null">
         upper(FIRST_NAME) LIKE '%' || upper(#{first_name}) || '%'
         <!-- '%${first_name}%'와 같음 -->
      </if>
      <if test="department_id != null">
      AND DEPARTMENT_ID = #{department_id}
      </if>
  </where>
</sql>

<select id="selectCount" resultType="Long">
    select count(*) from tbl_board

</select>

<select id="selectBoard" resultType="BoardVO">
	select a.* FROM (
	SELECT  /* +INDEX_DESC(TBL_BOARD PK_BOARD) */
		ROWNUM RN, e.*
		from tbl_board e
	)a WHERE RN BETWEEN #{first} AND #{last}
	

</select>


<select id ="selectBoardByNo" resultType="BoardVO">
	select bno,title,content,writer,regdate,updatedate,attach
	from tbl_board
	where bno = #{bno}
</select>

<insert id="insertBoard" parameterType="BoardVO" >
	insert into tbl_board ( bno,
	                        title,
	                        content,
	                        writer,
	                        attach)
	values(
	        seq_board.nextval,
	        #{title},
	        #{content},
	        #{writer},
	        #{attach}
	        )
	
</insert>


</mapper>